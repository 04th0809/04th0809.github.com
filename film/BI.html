<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title></title>
    <link rel="stylesheet" href="assets/css/index.css">
</head>
<body class="pg_bi">
    <div class="banner"><img src="assets/img/banner.jpg" alt="" width="100%"></div>
    <div class="container">
        <!--搜索-->
        <div class="searchBox">
            <form>
                <div class="input-group">
                    <div class="input-cont">
                        <input type="text" placeholder="输入电影名称，看预告片精彩分析" class="form-control">
                    </div>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-sear"><i class="m-icon-magnifier"></i></button>
                    </span>
                </div>
            </form>
        </div>
        <div class="film_brief clearfixed">
            <div class="p">
                <img src="http://p0.meituan.net/165.220/movie/a4f309b98a8e02bff70982d6118de3591478900.jpg" width="100%">
            </div>
            <div class="t">
                <dl>
                    <dt>重返20岁</dt>
                    <dd>导演：陈正道</dd>
                    <dd>主演：杨子姗，归亚蕾，陈柏霖，鹿晗</dd>
                    <dd>上映日期：1月10日</dd>
                    <dd>播放总量：2,345万</dd>
                </dl>
            </div>
        </div>
        <!--tit-->
        <div class="titBox">
            <h2>预告片播放量分析</h2>
            <div class="lk_btn back_home_btn"></div>
        </div>
        <!--排行榜-->
        <div class="frame_cont">
            <!--tab-->
            <div class="r_tab">
                <ul>
                    <li class="cur" data-tab-href="#list1">7天趋势</li>
                    <li data-tab-href="#list2">渠道分布</li>
                </ul>
            </div>
            <div class="list_bd">
                <div data-tab-id="list1" class="tab-content cur">
                    <div id="main" class="chart"></div>
                    <div class="data-compare">
                        <div class="tit">同期上映</div>
                        <div class="compare_list clearfixed">
                            <ul id="compare">
                                <li value="1"><em></em>三更车库</li>
                                <li value="2"><em></em>战狼</li>
                                <li value="3"><em></em>白幽灵传奇之绝命逃亡</li>
                                <li value="4"><em></em>暴疯语</li>
                                <li value="5"><em></em>冲锋车</li>
                                <li value="6"><em></em>特功明星</li>
                                <li value="7"><em></em>江南1970</li>
                                <li value="8"><em></em>重生恋人</li>
                                <li value="9"><em></em>超能查派</li>
                                <li value="10"><em></em>技术者们</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div data-tab-id="list2" class="tab-content">2</div>
            </div>
        </div>
    </div>
    <div class="backTop"></div>
    <script src="assets/js/zepto.min.js"></script>
    <script src="assets/js/touch.js"></script>
    <script src="assets/js/fx.js"></script>
    <script src="assets/js/echarts.js"></script>
    <script src="assets/js/common.js"></script>
    <script>
        var colors = ['#ff6600','#37536c','#319d4a','#c82a2a','#d89a14','#be1dc8','#5d32b4','#1fb7b5','#88c322','#57b2e1','#828282'];
        var data_x = ['2015.2.1','2015.2.2','2015.2.3','2015.2.4','2015.2.5','2015.2.6','2015.2.7'];
        //0 当前电影数据, 1-10同期数据
        var data_y = {
            0:[317686,225430,108217,90847,95382,89731,357732],
            1:[90847,95382,89731,357732,317686,225430,108217],
            2:[90847,95382,89731,317686,225430,108217,357732]
        };
        var tit = '重返20岁';
    </script>
    <script type="text/javascript">
        // 路径配置
        require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });

        // 使用
        require(
            [
                'echarts',
                'echarts/chart/line' // 使用柱状图就加载bar模块，按需加载
            ],
            function (ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('main'));

                var option = {
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: (function(){
                               var arr = [];
                               //var d = {name:tit, textStyle:{color:colors[0]}}
                               arr.push(tit)
                               return arr;
                        })(),
                        itemWidth:10,
                        itemHeight:10,
                        x:'right',
                        y:15
                    },
                    color:colors,
                    grid:{
                        x:80,
                        y:40,
                        x2:60,
                        y2:40
                    },
                    xAxis : [
                        {
                            type : 'category',
                            boundaryGap : false,
                            axisLine:{
                                lineStyle:{color:'#0091cb',width:1}
                            },
                            splitLine:{lineStyle:{color:['#eee']}},
                            data : data_x
                        }
                    ],
                    yAxis : [
                        {
                            type : 'value',
                            splitLine:{lineStyle:{color:['#e0e0e0']}},
                            axisLine:{lineStyle:{color:'#0091cb',width:1}}
                        }
                    ],

                    series : [
                        {
                            "name":tit,
                            "type":"line",
                            symbol:'emptyCircle',
                            symbolSize:4,
                            "data": data_y[0]
                        }
                    ]
                };
                // 为echarts对象加载数据
                myChart.setOption(option);



                // 对比
                $('#compare').bind(zClick,function(e){
                    var tar = e.target, $tar = $(tar), $li, $em, idx;
                    if(!$tar.closest('li').length){return false}
                    $li = $tar.closest('li');
                    $em = $li.find('em');
                    idx = $li.index();
                    var val = $li.attr('value');
                var legend = myChart.chart['line'].component.legend;
                    if($li.hasClass('cur')){
                        $li.removeClass('cur');
                        $em.css({'background-color':''})
                        legend.setSelected(val,false);
                    }else{
                        $li.addClass('cur');
                        $em.css({'background-color':colors[idx+1]})

                        var added = false,len;
                        len = option.series.length;
                        while (len--) {
                            if (option.series[len].name == val) {
                                // 已经添加
                                added = true;
                                break;
                            }
                        }
                        if(!added){
                            option.series.push({
                                "name": val,
                                "type":"line",
                                'symbol':'emptyCircle',
                                'symbolSize':4,
                                "data": data_y[idx+1]
                            })
                            myChart.setOption(option);
                        }else{
                            legend.setSelected(val,true);
                        }
                    }
                })
            }
        );
    </script>
</body>
</html>
